<div class="apos-slideshow{% if data.options.aspectRatio %} apos-slideshow--aspect-ratio{% endif %}{% block outerClass %}{% endblock %}" data-slideshow>
  <div class="image-container">
    {%- block items -%}
      {%- for entry in data.widget._pieces -%}
        {# Works whether there's a relationship in the join or not. Normally there always #}
        {# is for slideshows, but just in case someone really hates cropping... -Tom #}
        {%- set image = entry.item or entry -%}
        {%- set relationship = entry.relationship -%}
        <div class="image"
          style="background-image:
            url({{ apos.attachments.url(image.attachment, { size: data.options.size, crop: relationship }) }})
            {%- if apos.attachments.hasFocalPoint(relationship) -%}
              ; background-position: {{ apos.attachments.focalPointToBackgroundPosition(relationship) }}
            {%- endif -%}
            {%- if data.options.aspectRatio and (image.attachment.extension == 'svg') -%}
              ; width: 100%; padding-bottom: {{ 100 * data.options.aspectRatio[1] / data.options.aspectRatio[0] }}%; background-size: contain
            {%- endif -%}
          ">
        </div>
        {%- block credit -%}
          {%- if image.credit -%}
          {%- if image.creditUrl -%}
            <a class="small-text" href="{{ image.creditUrl }}">
              {%- endif -%}
              {{ image.credit }}
              {%- if image.creditUrl -%}
            </a>
          {%- endif -%}
          {%- endif -%}
        {%- endblock -%}
        {%- block description -%}
          {%- if image.description -%}
            <div class="small-text">{{ image.description | nlbr }}</div>
          {%- endif -%}
        {%- endblock -%}
      {% endfor %}
    {%- endblock -%}
  </div>
</div>
